@model DaviesForumApp.Models.User

@{
    ViewData["Title"] = "Delete";
}

<h1>Delete</h1>

<h3>Are you sure you want to delete this?</h3>
<div>
    <h4>User</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.UserName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.UserName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.PassWord)
        </dt>
        <dd class = "col-sm-10">
            <input class="form-control" disabled value="@Html.DisplayFor(model => model.PassWord)" id="myInput" type="password">
            <input type="checkbox" onclick="myFunction()"> Show Password
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.UserEmail)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.UserEmail)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Department)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Department)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Age)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Age)
        </dd>
    </dl>
    
    <form asp-action="Delete">
        <input type="hidden" asp-for="UserId" />
        <button type="button" id="delete-item-btn" onClick="deleteCheck()" class="btn btn-danger" data-toggle="modal" data-target="delete-modal">Delete</button>
        <a asp-action="Search" class="btn btn-dark p-2">Back</a>                    
    </form>
</div>

<!-- Modal -->

<div id="delete-modal" tabindex="-1" role="dialog" aria-labelledby="delete-modal">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
            <h4 class="modal-title text-dark">Delete Confirmation</h4>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
            <p class="text-dark">Are you sure you want to delete @Model.UserName? This cannot be undone.</p>
            </div>
            <div class="modal-footer">
            <form asp-action="Delete">
                <button type="submit" asp-action="Delete" value="Delete" class="btn btn-danger">Delete</button>
            </form>
            </div>
        </div>   
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        <script type="text/javascript" language="JavaScript">
            function myFunction() {
                var x = document.getElementById("myInput");
                if (x.type === "password") {
                    x.type = "text";
                } else {
                    x.type = "password";
                }
            }

            function deleteCheck() {
                const modal = document.getElementById("delete-modal");

                const btn = document.getElementById("delete-item-btn");

                const button = document.getElementsByClassName("close")[0];

                btn.onclick = function () {
                    modal.style.display = "block"
                }

                button.onclick = function () {
                    modal.style.display = "none"
                }

                window.onclick = function (event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                };
            }
        </script>
    }
    
}